/*
From JavaScript and Forms Tutorial at dyn-web.com
Find information and updates at http://www.dyn-web.com/tutorials/forms/
*/

// removes all option elements in select list 
// removeGrp (optional) boolean to remove optgroups
function removeAllOptions(sel, removeGrp) {
    var len, groups, par;
    if (removeGrp) {
        groups = sel.getElementsByTagName('optgroup');
        len = groups.length;
        for (var i=len; i; i--) {
            sel.removeChild( groups[i-1] );
        }
    }
    
    len = sel.options.length;
    for (var i=len; i; i--) {
        par = sel.options[i-1].parentNode;
        par.removeChild( sel.options[i-1] );
    }
}

function appendDataToSelect(sel, obj) {
    var f = document.createDocumentFragment();
    var labels = [], group, opts;
    
    function addOptions(obj) {
        var f = document.createDocumentFragment();
        var o;
        
        for (var i=0, len=obj.text.length; i<len; i++) {
            o = document.createElement('option');
            o.appendChild( document.createTextNode( obj.text[i] ) );
            
            if ( obj.value ) {
                o.value = obj.value[i];
            }
            
            f.appendChild(o);
        }
        return f;
    }
    
    if ( obj.text ) {
        opts = addOptions(obj);
        f.appendChild(opts);
    } else {
        for ( var prop in obj ) {
            if ( obj.hasOwnProperty(prop) ) {
                labels.push(prop);
            }
        }
        
        for (var i=0, len=labels.length; i<len; i++) {
            group = document.createElement('optgroup');
            group.label = labels[i];
            f.appendChild(group);
            opts = addOptions(obj[ labels[i] ] );
            group.appendChild(opts);
        }
    }
    sel.appendChild(f);
}

// anonymous function assigned to onchange event of controlling select list
document.forms['searchForm'].elements['tinh_tp'].onchange = function(e) {
    // name of associated select list
    var relName = 'quan_huyen';
    
    // reference to associated select list 
    var relList = this.form.elements[ relName ];
    
    // get data from object literal based on selection in controlling select list (this.value)
    var obj = Select_List_Data[ relName ][ this.value ];
    
    // remove current option elements
    removeAllOptions(relList, true);
    
    // call function to add optgroup/option elements
    // pass reference to associated select list and data for new options
    appendDataToSelect(relList, obj);
};

// object literal holds data for optgroup/option elements
var Select_List_Data = {
    
    // name of associated select list
    'quan_huyen': {
        
        // names match option values in controlling select box
		0: {
			text : ['--Quận/Huyện--'],
			value: ['0']
			
		},
        1: {
            text: ['TP Long Xuyên', 'TX Châu Đốc', 'An Phú', 'Thị Xã Tân Châu', 'Phú Tân', 'Châu Phú', 'Tịnh Biên', 'Tri Tôn', 'Châu Thành', 'Chợ Mới', 'Thoại Sơn'],
            value: ['11', '12', '13', '14', '15','16','17','18','19','110','111']
        },
		2: {
            text: ['TP Vũng Tàu',
			'TP Bà Rịa',
			'Châu Đức',
			'Xuyên Mộc',
			'Long Điền',
			'Đất Đỏ',
			'Thị Xã Phú Mỹ',
			'Côn Đảo'],
            value: ['21', '22', '23', '24','25','26','27','28']
        },
        3: {
            text: ['Thành phố Bạc Liêu',
			'Hồng Dân',
			'Phước Long',
			'Vĩnh Lợi',
			'Thị xã Giá Rai',
			'Đông Hải',
			'Hoà Bình'],
            value: ['31', '32', '33', '34','35','36','37']
        },
		4: {
            text: ['Thành phố Bắc Giang',
			'Yên Thế',
			'Tân Yên',
			'Lạng Giang',
			'Lục Nam',
			'Lục Ngạn',
			'Sơn Động',
			'Yên Dũng',
			'Việt Yên',
			'Hiệp Hoà'],
            value: ['41', '42', '43', '44','45','46','47','48','49','410']
        },
		5: {
            text: ['Thành Phố Bắc Kạn',
			'Pác Nặm',
			'Ba Bể',
			'Ngân Sơn',
			'Bạch Thông',
			'Chợ Đồn',
			'Chợ Mới',
			'Na Rì'],
            value: ['51', '52', '53', '54','55','56','57','58']
        },
		6: {
            text: ['Thành phố Bắc Ninh',
			'Yên Phong',
			'Quế Võ',
			'Tiên Du',
			'Thị Xã Từ Sơn',
			'Thuận Thành',
			'Gia Bình',
			'Lương Tài'],
            value: ['61', '62', '63', '64','65','66','67','68']
        },
		7: {
            text: ['',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			''],
            value: ['71', '72', '73', '74','75','76','77','78','79']
        },
		8: {
            text: ['',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			''],
            value: ['81', '82', '83', '84','85','86','87','88','89']
        },
		9: {
            text: ['',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			''],
            value: ['91', '92', '93', '94','95','96','97','98','99','99','911']
        },
		10: {
            text: ['',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			''],
            value: ['101', '102', '103', '104','105','106','107','108','109','1010','1011']
        },
		11: {
            text: ['',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			''],
            value: ['111', '112', '113', '114','115','116','117','118','119','1110']
        },
		12: {
            text: ['',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			''],
            value: ['121', '122', '123', '124','125','126','127','128','129']
        },
		13: {
            text: ['',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			''],
            value: ['131', '132', '133', '134','135','136','137','138','139','1310']
        },
		14: {
            text: ['',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			''],
            value: ['141', '142', '143', '144','145','146','147','148','149']
        },
		15: {
            text: ['',
			'',
			'',
			'',
			'',
			'',
			'',
			''],
            value: ['151', '152', '153', '154','155','156','157','158']
        },
		16: {
            text: ['',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			''],
            value: ['161', '162', '163', '164', '165', '166', '167', '168', '169', '1610', '1611', '1612', '1613', '1614', '1615']
        },
		17: {
            text: ['',
			'',
			'',
			'',
			'',
			'',
			'',
			''],
            value: ['171', '172', '173', '174','175','176','177','178']
        },
		18: {
            text: ['',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			''],
            value: ['181', '182', '183', '184','185','186','187','188','189','1810','1811']
        },
		19: {
            text: ['',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			''],
            value: ['191', '192', '193', '194','195','196','197','198','199','1910','1911','1912']
        },
		20: {
            text: ['',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			''],
            value: ['201', '202', '203', '204','205','206','207','208','209','2010']
        },
		21: {
            text: ['',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			''],
             value: ['221', '222', '223', '224','225','226','227','228','229','2210','2211','2212','2213','2214','2215','2216','2217']
        },
		22: {
            text: ['',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			''],
            value: ['221', '222', '223', '224','225','226','227','228','229','2210','2211']
        },
		23: {
            text: ['',
			'',
			'',
			'',
			'',
			''],
            value: ['231', '232', '233', '234','235','236']
        },
		24: {
            text: ['',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			''],
            value: ['241', '242', '243', '244', '245', '246', '247', '248', '249', '2410', '2411', '2412', '2413', '2414', '2415', '2416', '2417', '2418', '2419', '2420', '2421', '2422', '2423', '2424', '2425', '2426', '2427', '2428', '2429', '2430']
        },
		25: {
            text: ['',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			''],
            value: ['251', '252', '253', '254', '255', '256', '257', '258', '259', '2510', '2511', '2512', '2513']
        },
		26: {
            text: ['',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			''],
            value: ['261', '262', '263', '264', '265', '266', '267', '268', '269', '2610', '2611', '2612']
        },
		27: {
            text: ['',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			''],
            value: ['271', '272', '273', '274', '275', '276', '277', '278', '279', '2710', '2711', '2712', '2713', '2714', '2715']
        },
		28: {
            text: ['',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			''],
            value: ['281', '282', '283', '284','285','286','287','288','289','2810']
        },
		29: {
            text: ['',
			'',
			'',
			'',
			'',
			'',
			'',
			''],
            value: ['291', '292', '293', '294','295','296','297','298']
        },
		30: {
            text: ['',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			''],
            value: ['301', '302', '303', '304','305','306','307','308','309','3010']
        },
		31: {
            text: ['',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			''],
            value: ['311', '312', '313', '314', '315', '316', '317', '318', '319', '3110', '3111', '3112', '3113', '3114', '3115', '3116', '3117', '3118', '3119', '3120', '3121', '3122', '3123', '3124']
        },
		32: {
            text: ['',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			''],
            value: ['321', '322', '323', '324','325','326','327','328','329']
        },
		33: {
            text: ['',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			''],
            value: ['331', '332', '333', '334', '335', '336', '337', '338', '339', '3310', '3311', '3312', '3313', '3314', '3315']
        },
		34: {
            text: ['',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			''],
            value: ['341', '342', '343', '344','345','346','347','348','349','3410']
        },
		35: {
            text: ['',
			'',
			'',
			'',
			'',
			'',
			'',
			''],
            value: ['351', '352', '353', '354','355','356','357','358']
        },
		36: {
            text: ['',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			''],
            value: ['361', '362', '363', '364','365','366','367','368','369']
        },
		37: {
            text: ['',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			''],
           value: ['371','372','373','374','375','376','377','378','379','3710','3711']
        },
		38: {
            text: ['',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			''],
            value: ['381','382','383','384','385','386','387','388','389','3810','3811','3812']
        },
		39: {
            text: ['',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			''],
            value: ['391','392','393','394','395','396','397','398','399','3910','3911','3912','3913','3914','3915']
        },
		40: {
            text: ['',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			''],
            value: ['401', '402', '403', '404','405','406','407','408','409','4010']
        },
		41: {
            text: ['',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			''],
            value: ['411', '412', '413', '414', '415', '416', '417', '418', '419', '4110', '4111', '4112', '4113', '4114', '4115', '4116', '4117', '4118', '4119', '4120', '4121']
        },
		42: {
            text: ['',
			'',
			'',
			'',
			'',
			'',
			'',
			''],
            value: ['421', '422', '423', '424','425','426','427','428']
        },
		43: {
            text: ['',
			'',
			'',
			'',
			'',
			'',
			''],
            value: ['431', '432', '433', '434','435','436','437']
        },
		44: {
            text: ['',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			''],
            value: ['441', '442', '443', '444','445','446','447','448','449','4410','4411','4412','4413']
        },
		45: {
            text: ['',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			''],
            value: ['451', '452', '453', '454','455','456','457','458','459']
        },
		46: {
            text: ['',
			'',
			'',
			'',
			'',
			'',
			'',
			''],
            value: ['461', '462', '463', '464','465','466','467','468']
        },
		47: {
            text: ['',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			''],
            value: ['471', '472', '473', '474', '475', '476', '477', '478', '479', '4710', '4711', '4712', '4713', '4714', '4715', '4716', '4717', '4718']
        },
		48: {
            text: ['',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			''],
            value: ['481', '482', '483', '484','485','486','487','488','489','4810','4811','4812','4813']
        },
		49: {
            text: ['',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			''],
            value: ['491', '492', '493', '494','495','496','497','498','499','4910','4911','4912','4913']
        },
		50: {
            text: ['',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			''],
            value: ['501', '502', '503', '504','505','506','507','508','509','5010']
        },
		51: {
            text: ['',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			''],
            value: ['511', '512', '513', '514','515','516','517','518','519','5110','5111']
        },
		52: {
            text: ['',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			''],
            value: ['521', '522', '523', '524','525','526','527','528','529','5210','5211','5212']
        },
		53: {
            text: ['',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			''],
            value: ['531', '532', '533', '534','535','536','537','538','539']
        },
		54: {
            text: ['',
			'',
			'',
			'',
			'',
			'',
			'',
			''],
            value: ['541', '542', '543', '544','545','546','547','548']
        },
		55: {
            text: ['',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			''],
            value: ['551', '552', '553', '554','555','556','557','558','559']
        },
		56: {
            text: ['',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			''],
            value: ['561', '562', '563', '564','565','566','567','568','569','5610','5611','5612','5613','5614','5615','5616','5617','5618','5619','5620','5621','5622','5623','5624','5625','5626','5627']
        },
		57: {
            text: ['',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			''],
            value: ['571', '572', '573', '574','575','576','577','578','579']
        },
		58: {
            text: ['',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			''],
            value: ['581', '582', '583', '584','585','586','587','588','589','5810','5811']
        },
		59: {
            text: ['',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			''],
            value: ['591', '592', '593', '594','595','596','597','598','599']
        },
		60: {
            text: ['',
			'',
			'',
			'',
			'',
			'',
			''],
            value: ['601', '602', '603', '604','605','606','607']
        },
		61: {
            text: ['',
			'',
			'',
			'',
			'',
			'',
			'',
			''],
            value: ['611', '612', '613', '614','615','616','617','618']
        },
		62: {
            text: ['',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			''],
            value: ['621', '622', '623', '624','625','626','627','628','629']
        },
		63: {
            text: ['',
			'',
			'',
			'',
			'',
			'',
			'',
			'',
			''],
            value: ['631', '632', '633', '634','635','636','637','638','639']
        }
    }
    
};

// populate associated select list when page loads
window.onload = function() {
    var form = document.forms['searchForm'];
    
    // reference to controlling select list
    var sel = form.elements['tinh_tp'];
    sel.selectedIndex = 0;
    
    // name of associated select list
    var relName = 'quan_huyen';
    // reference to associated select list
    var rel = form.elements[ relName ];
    
    // get data for associated select list passing its name
    // and value of selected in controlling select list
    var data = Select_List_Data[ relName ][ sel.value ];
    
    // add options to associated select list
    appendDataToSelect(rel, data);
};
